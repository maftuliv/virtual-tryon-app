# üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ OAuth –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Railway

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞!

–í Google Cloud Console —Å—É—â–µ—Å—Ç–≤—É–µ—Ç OAuth Client —Å ID:
```
558131336096-bpdufj7dj1240r45k3feulft6tvfudpi.apps.googleusercontent.com
```

–ù–æ –≤ Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Client ID:
```
278663351028-qcrgf8j2d1lpce6kjamb4vtejq82mcg5.apps.googleusercontent.com
```

---

## üéØ –†–µ—à–µ–Ω–∏–µ: –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Railway

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://railway.app/
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Å: **test_backend_virtual_tryon**

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables** tab
2. –ù–∞–π–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –∏—Ö:

#### ‚úÖ GOOGLE_CLIENT_ID

**–°—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ):**
```
278663351028-qcrgf8j2d1lpce6kjamb4vtejq82mcg5.apps.googleusercontent.com
```

**–ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ):**
```
558131336096-bpdufj7dj1240r45k3feulft6tvfudpi.apps.googleusercontent.com
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `GOOGLE_CLIENT_ID`
- –ó–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–π Client ID
- –ù–∞–∂–º–∏—Ç–µ **Save** –∏–ª–∏ **Update**

#### ‚úÖ GOOGLE_CLIENT_SECRET

**–ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**
```
GOCSPX-TM1xiYZZAOjDS5SI76zkUoPcpGA
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `GOOGLE_CLIENT_SECRET`
- –ó–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–π Client Secret
- –ù–∞–∂–º–∏—Ç–µ **Save** –∏–ª–∏ **Update**

#### ‚úÖ GOOGLE_REDIRECT_URI (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ)

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
https://testbackendvirtualtryon-production.up.railway.app/api/auth/google/callback
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–µ (–±–µ–∑ trailing slash)
- –ï—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è - –æ–±–Ω–æ–≤–∏—Ç–µ

---

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:

- ‚úÖ `GOOGLE_OAUTH_ENABLED=true`
- ‚úÖ `GOOGLE_CLIENT_ID=558131336096-bpdufj7dj1240r45k3feulft6tvfudpi.apps.googleusercontent.com`
- ‚úÖ `GOOGLE_CLIENT_SECRET=GOCSPX-TM1xiYZZAOjDS5SI76zkUoPcpGA`
- ‚úÖ `GOOGLE_REDIRECT_URI=https://testbackendvirtualtryon-production.up.railway.app/api/auth/google/callback`

**–í–∞–∂–Ω–æ:**
- –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ
- –ó–Ω–∞—á–µ–Ω–∏—è –ù–ï –≤ –∫–∞–≤—ã—á–∫–∞—Ö
- Client ID –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ `.apps.googleusercontent.com`

---

### –®–∞–≥ 4: –û–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

**–ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã** –¥–ª—è:
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### 5.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
curl https://testbackendvirtualtryon-production.up.railway.app/api/auth/google/status
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "enabled": true,
  "configured": true,
  "client_id_masked": "5581313360...udpi",
  "client_id_format_valid": true,
  "redirect_uri": "https://testbackendvirtualtryon-production.up.railway.app/api/auth/google/callback",
  "config_issues": []
}
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- `client_id_masked` –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `5581313360...` (–Ω–æ–≤—ã–π Client ID)
- `config_issues` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º

#### 5.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ authorization URL

```bash
curl https://testbackendvirtualtryon-production.up.railway.app/api/auth/google/login
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "authorization_url": "https://accounts.google.com/o/oauth2/auth?client_id=558131336096-bpdufj7dj1240r45k3feulft6tvfudpi.apps.googleusercontent.com&..."
}
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- `authorization_url` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–æ–≤—ã–π Client ID (`558131336096-...`)

#### 5.3 –û—Ç–∫—Ä—ã—Ç–∏–µ authorization URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `authorization_url` –∏–∑ –æ—Ç–≤–µ—Ç–∞
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (—Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ)
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è —ç–∫—Ä–∞–Ω —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π Google (consent screen)
   - ‚ùå –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∞ 401 - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –µ—â–µ —Ä–∞–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

- [ ] –û—Ç–∫—Ä—ã–ª Railway Dashboard
- [ ] –í—ã–±—Ä–∞–ª —Å–µ—Ä–≤–∏—Å `test_backend_virtual_tryon`
- [ ] –û–±–Ω–æ–≤–∏–ª `GOOGLE_CLIENT_ID` –Ω–∞ `558131336096-bpdufj7dj1240r45k3feulft6tvfudpi.apps.googleusercontent.com`
- [ ] –û–±–Ω–æ–≤–∏–ª `GOOGLE_CLIENT_SECRET` –Ω–∞ `GOCSPX-TM1xiYZZAOjDS5SI76zkUoPcpGA`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª `GOOGLE_REDIRECT_URI` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º)
- [ ] –£–±–µ–¥–∏–ª—Å—è, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
- [ ] –ü–æ–¥–æ–∂–¥–∞–ª 1-2 –º–∏–Ω—É—Ç—ã –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª `/api/auth/google/status` - –Ω–æ–≤—ã–π Client ID
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª authorization URL - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è consent screen

---

## üîç –ï—Å–ª–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å?

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ `/api/auth/google/status`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `client_id_masked` –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `5581313360...`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: Redirect URI –≤ Google Console

–í Google Cloud Console –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Redirect URI —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç:
```
https://testbackendvirtualtryon-production.up.railway.app/api/auth/google/callback
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –õ–æ–≥–∏ Railway

1. –û—Ç–∫—Ä–æ–π—Ç–µ Railway ‚Üí Deployments ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π deployment ‚Üí Logs
2. –ù–∞–π–¥–∏—Ç–µ –ª–æ–≥–∏ —Å `[GOOGLE-AUTH]`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Client ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ –ª–æ–≥–∞—Ö

---

## ‚úÖ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ö–æ–≥–¥–∞ –≤—Å–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç:
1. ‚úÖ Authorization URL –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å consent screen Google
2. ‚úÖ –ü–æ—Å–ª–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—É–¥–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ callback
3. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω

---

*–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è OAuth –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Railway*



